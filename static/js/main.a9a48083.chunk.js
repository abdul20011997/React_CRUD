(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){},31:function(t,e,n){},37:function(t,e,n){"use strict";n.r(e);var o=n(0),c=n(21),s=n.n(c),i=(n(27),n(9)),a=n(10),l=n(13),r=n(12),h=(n(28),n(8)),d=n.n(h),u=(n(29),n(1)),j=function(){return Object(u.jsx)("div",{className:"loader",children:"Loading..."})},p=function(t){Object(l.a)(n,t);var e=Object(r.a)(n);function n(){var t;Object(i.a)(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).state={post:[],loading:!1},t.viewPost=function(e){t.props.history.push("/singlepost/"+e)},t.editPost=function(e){t.props.history.push("/createpost/"+e+"?edit=true")},t.deletePost=function(e){t.setState({loading:!0}),fetch("http://localhost:4000/feed/post/"+e,{method:"DELETE"}).then((function(e){return t.setState({loading:!1}),e.json()})).then((function(n){var o=t.state.post.filter((function(t){return t._id!=e}));console.log(o),t.setState({post:o})})).catch((function(e){console.log(e),t.setState({loading:!1})}))},t}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.setState({loading:!0}),fetch("http://localhost:4000/feed/post").then((function(e){return t.setState({loading:!1}),e.json()})).then((function(e){t.setState({post:e.post})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}},{key:"render",value:function(){var t=this,e=[d.a.btn,d.a.edit],n=Object(u.jsx)(j,{});return this.state.loading||(n=this.state.post.length<=0?Object(u.jsx)("div",{style:{textAlign:"center"},children:Object(u.jsx)("h1",{children:"No Posts Found"})}):this.state.post.map((function(n){return Object(u.jsxs)("div",{className:d.a.container,children:[Object(u.jsxs)("div",{className:d.a.name,children:["Abdul posted on ",new Date(n.createdAt).toLocaleDateString("en-US")]}),Object(u.jsx)("div",{className:d.a.title,children:n.title}),Object(u.jsx)("div",{className:d.a.title,children:n.content}),Object(u.jsx)("button",{className:e.join(" "),onClick:function(){return t.viewPost(n._id)},children:"View"}),Object(u.jsx)("button",{className:e.join(" "),onClick:function(){return t.editPost(n._id)},children:"edit"}),Object(u.jsx)("button",{className:e.join(" "),onClick:function(){return t.deletePost(n._id)},children:"Delete"})]},n._id)}))),Object(u.jsx)("div",{children:Object(u.jsx)("div",{children:n})})}}]),n}(o.Component),b=n(2),f=(n(31),function(t){Object(l.a)(n,t);var e=Object(r.a)(n);function n(){var t;Object(i.a)(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).state={title:"",content:"",redirect:!1,editmode:!1},t.createPost=function(){console.log(t.state.content),fetch("http://localhost:4000/feed/post",{method:"POST",body:JSON.stringify({title:t.state.title,content:t.state.content}),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(e){console.log(e),t.setState({redirect:!0})})).catch((function(t){console.log(t)}))},t.updatePost=function(){console.log(t.state.content);var e=t.props.match.params.id;fetch("http://localhost:4000/feed/post/"+e,{method:"PUT",body:JSON.stringify({title:t.state.title,content:t.state.content}),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(e){console.log(e.message),t.setState({redirect:!0})})).catch((function(t){console.log(t)}))},t}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var t=this;console.log(this.props);var e=this.props.match.params.id,n=this.props.location.search.split("=")[1];e&&n&&(this.setState({editmode:!0}),fetch("http://localhost:4000/feed/singlepost/"+e).then((function(t){return t.json()})).then((function(e){console.log(e.singlepost),t.setState({title:e.singlepost.title,content:e.singlepost.content})})))}},{key:"render",value:function(){var t=this,e=Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("label",{children:"Title"}),Object(u.jsx)("input",{type:"text",placeholder:"Enter title",name:"title",value:this.state.title,onChange:function(e){return t.setState({title:e.target.value})}}),Object(u.jsx)("label",{children:"Content"}),Object(u.jsx)("input",{type:"text",placeholder:"Enter content",value:this.state.content,name:"content",onChange:function(e){return t.setState({content:e.target.value})}}),this.state.editmode?Object(u.jsx)("button",{className:"button",onClick:this.updatePost,children:"Update"}):Object(u.jsx)("button",{className:"button",onClick:this.createPost,children:"Create"})]});return this.state.redirect&&(e=Object(u.jsx)(b.a,{to:"/"})),e}}]),n}(o.Component)),O=n(19),g=Object(b.f)((function(t){var e=Object(o.useState)(""),n=Object(O.a)(e,2),c=n[0],s=n[1],i=Object(o.useState)(!1),a=Object(O.a)(i,2),l=a[0],r=a[1];Object(o.useEffect)((function(){r(!0);var e=t.match.params.id;fetch("http://localhost:4000/feed/singlepost/"+e).then((function(t){return r(!1),t.json()})).then((function(t){console.log(t.singlepost),s(t.singlepost)}))}),[]);var h=Object(u.jsx)(j,{});return l||(h=Object(u.jsxs)("div",{style:{textAlign:"center"},children:[Object(u.jsxs)("h1",{children:["Abdul Posted on ",new Date(c.createdAt).toLocaleDateString("en-US")]}),Object(u.jsx)("h2",{style:{color:"darkgrey"},children:c.title}),Object(u.jsx)("h3",{style:{color:"#c5c526"},children:c.content})]})),h})),x=n(11),m=function(t){Object(l.a)(n,t);var e=Object(r.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("nav",{className:"navbar",children:Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:Object(u.jsx)(x.b,{to:"/",exact:!0,children:"Home"})}),Object(u.jsx)("li",{children:Object(u.jsx)(x.b,{to:"/createpost",children:"Add Post"})})]})}),Object(u.jsx)(b.b,{path:"/createpost",exact:!0,component:f}),Object(u.jsx)(b.b,{path:"/createpost/:id",component:f}),Object(u.jsx)(b.b,{path:"/singlepost/:id",component:g}),Object(u.jsx)(b.b,{path:"/",exact:!0,component:p})]})}}]),n}(o.Component),v=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(e){var n=e.getCLS,o=e.getFID,c=e.getFCP,s=e.getLCP,i=e.getTTFB;n(t),o(t),c(t),s(t),i(t)}))};s.a.render(Object(u.jsx)(x.a,{children:Object(u.jsx)(m,{})}),document.getElementById("root")),v()},8:function(t,e,n){t.exports={container:"post_container__2KOKf",name:"post_name__2kNUn",title:"post_title__1HDKB",btn:"post_btn__1ZAmW",edit:"post_edit__2Tn9x"}}},[[37,1,2]]]);
//# sourceMappingURL=main.a9a48083.chunk.js.map